{"version":3,"file":"981.js","mappings":"yQAee,SAASA,IACtB,MAAM,UAAEC,IAAcC,EAAAA,EAAAA,MAChBC,GAAaC,EAAAA,EAAAA,MAEbC,GAAuBC,EAAAA,EAAAA,IAAwBL,IAC/C,KAAEM,EAAI,QAAEC,EAAO,UAAEC,GAAcJ,EAE/BK,EAAWF,EACb,0BACAC,OACAE,EACAJ,GAAQA,EAAKK,OAAS,EACtB,GAAGL,EAAKK,iBAAiBL,EAAKK,OAAS,EAAI,IAAM,KACjD,iBAEEC,EACJN,GAAQA,GAAMK,OAAS,EACnB,IAAGE,EAAAA,EAAAA,IACDP,EAAKQ,QAAO,CAACC,EAAKC,IAASD,EAAMC,EAAKC,UAAU,GAChD,CAAEC,cAAc,MAElB,GAEAC,GAAmBC,EAAAA,EAAAA,IAAyBpB,GAE5CqB,EAAwBF,EAAiBb,MAAMQ,QACnD,CAACC,GAAMO,EAAGN,KAAUD,GAAOC,GAAMO,QAAU,IAC3C,GAGIC,OACsBd,IAA1BW,EACIA,EAAwB,EACtB,KAAIR,EAAAA,EAAAA,IAAsBQ,EAAuB,CAC/CH,cAAc,MAEhB,QACFR,EAEN,OACE,gBAACe,EAAAA,EAAoBA,CACnBhB,SAAUA,EACVG,MAAOA,EACPY,aAAcA,EACdE,QACEnB,OACIG,EACA,KACER,EAAWyB,KAAKC,EAAAA,EAAOC,eAAgB,CACrCC,OAAQC,EAAAA,EAAYC,iBACpBC,YAAQvB,GACR,GAKhB,C","sources":["webpack://@coral-xyz/app-extension/./src/components/Unlocked/Stake/StakeButton.tsx"],"sourcesContent":["import { useActiveWallet } from \"@coral-xyz/recoil\";\nimport {\n  useInflationRewardsQuery,\n  useProgramAccountsQuery,\n} from \"@coral-xyz/staking/src/hooks\";\nimport { lamportsToSolAsString } from \"@coral-xyz/staking/src/shared\";\nimport { StakeButtonComponent } from \"@coral-xyz/staking/src/StakeButtonComponent\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nimport { Routes as StakeRoutes } from \"../../../refactor/navigation/StakeNavigator\";\nimport { Routes } from \"../../../refactor/navigation/WalletsNavigator\";\n\n/**\n * Loaded lazily on the Solana Token Detail Page, hence the default function export\n */\nexport default function StakeButton() {\n  const { publicKey } = useActiveWallet();\n  const navigation = useNavigation<any>();\n\n  const programAccountsQuery = useProgramAccountsQuery(publicKey);\n  const { data, isError, isLoading } = programAccountsQuery;\n\n  const subtitle = isError\n    ? \"Error fetching accounts\"\n    : isLoading\n    ? undefined\n    : data && data.length > 0\n    ? `${data.length} account${data.length > 1 ? \"s\" : \"\"}`\n    : \"Stake some SOL\";\n\n  const total =\n    data && data?.length > 0\n      ? `${lamportsToSolAsString(\n          data.reduce((acc, curr) => acc + curr.lamports, 0),\n          { appendTicker: true }\n        )}`\n      : \"\";\n\n  const inflationRewards = useInflationRewardsQuery(publicKey);\n\n  const totalInflationRewards = inflationRewards.data?.reduce(\n    (acc, [_, curr]) => acc + (curr?.amount ?? 0),\n    0\n  );\n\n  const totalRewards =\n    totalInflationRewards !== undefined\n      ? totalInflationRewards > 0\n        ? `+${lamportsToSolAsString(totalInflationRewards, {\n            appendTicker: true,\n          })}`\n        : \"\"\n      : undefined;\n\n  return (\n    <StakeButtonComponent\n      subtitle={subtitle}\n      total={total}\n      totalRewards={totalRewards}\n      onPress={\n        isError\n          ? undefined\n          : () => {\n              navigation.push(Routes.StakeNavigator, {\n                screen: StakeRoutes.ListStakesScreen,\n                params: undefined,\n              });\n            }\n      }\n    />\n  );\n}\n"],"names":["StakeButton","publicKey","useActiveWallet","navigation","useNavigation","programAccountsQuery","useProgramAccountsQuery","data","isError","isLoading","subtitle","undefined","length","total","lamportsToSolAsString","reduce","acc","curr","lamports","appendTicker","inflationRewards","useInflationRewardsQuery","totalInflationRewards","_","amount","totalRewards","StakeButtonComponent","onPress","push","Routes","StakeNavigator","screen","StakeRoutes","ListStakesScreen","params"],"sourceRoot":""}